import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.Scanner;

class Alumno {
    String carnet;
    String nombre;

    public Alumno(String carnet, String nombre) {
        this.carnet = carnet;
        this.nombre = nombre;
    }
}

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        // Declaramos la variable como Collection
        Collection<Alumno> listaAlumnos = new ArrayList<>();

        boolean continuar = true;

        while (continuar) {
            System.out.println("\n MENÚ PRINCIPAL");
            System.out.println("1. Registrar alumno");
            System.out.println("2. Buscar alumno por carnet");
            System.out.println("3. Eliminar alumno por carnet");
            System.out.println("4. Mostrar todos los alumnos");
            System.out.println("5. Salir");
            System.out.print("Seleccione una opción: ");

            int opcion;
            if (scanner.hasNextInt()) {
                opcion = scanner.nextInt();
            } else {
                System.out.println(" Ingrese un número válido.");
                scanner.nextLine();
                continue;
            }
            scanner.nextLine(); // limpiar buffer

            switch (opcion) {
                case 1:
                    System.out.print("Carnet: ");
                    String carnet = scanner.nextLine();
                    System.out.print("Nombre completo: ");
                    String nombre = scanner.nextLine();
                    listaAlumnos.add(new Alumno(carnet, nombre));
                    System.out.println(" Alumno ingresado exitosamente.");
                    break;

                case 2:
                    System.out.print("Ingrese el carnet a buscar: ");
                    String carnetBusqueda = scanner.nextLine();
                    boolean encontrado = false;
                    for (Alumno a : listaAlumnos) {
                        if (a.carnet.equalsIgnoreCase(carnetBusqueda)) {
                            System.out.println(" Alumno encontrado:");
                            System.out.println("Carnet: " + a.carnet);
                            System.out.println("Nombre: " + a.nombre);
                            encontrado = true;
                            break;
                        }
                    }
                    if (!encontrado) {
                        System.out.println(" Alumno no encontrado, no se puede Mostrar.");
                    }
                    break;

                case 3:
                    System.out.print("Ingrese el carnet del alumno a eliminar: ");
                    String carnetEliminar = scanner.nextLine();
                    boolean eliminado = false;

                    // Usamos Iterator porque Collection no soporta eliminación directa en for-each
                    Iterator<Alumno> it = listaAlumnos.iterator();
                    while (it.hasNext()) {
                        Alumno a = it.next();
                        if (a.carnet.equalsIgnoreCase(carnetEliminar)) {
                            it.remove();
                            eliminado = true;
                            System.out.println(" Alumno eliminado exitosamente.");
                            break;
                        }
                    }
                    if (!eliminado) {
                        System.out.println(" Alumno no encontrado, No se puede Eliminar.");
                    }
                    break;

                case 4:
                    System.out.println("\n Lista de alumnos registrados:");
                    if (listaAlumnos.isEmpty()) {
                        System.out.println(" No hay alumnos registrados.");
                    } else {
                        for (Alumno a : listaAlumnos) {
                            System.out.println("- " + a.carnet + " | " + a.nombre);
                        }
                    }
                    break;

                case 5:
                    continuar = false;
                    System.out.println(" Programa finalizado.");
                    break;

                default:
                    System.out.println(" Opción inválida. Intente de nuevo.");
            }
        }
        scanner.close();
    }
}
